<div class="lvg-content">

    <md-card class="lvg-content__row lvg-content__row-item">
        <div class="lvg-project-milestone__progress" ng-if="$ctrl.showArray($ctrl.milestone.cardsCountByStatus)" ng-style="{'background-color': ($ctrl.statusColors[$ctrl.cardsCountByStatus.slice(-1)[0].status] | color).color}">
            <div class="lvg-project-milestone__progress-bar"
                ng-repeat="item in $ctrl.cardsCountByStatus" ng-if="!$last"
                ng-style="{'width': (item.count * 100.0 / $ctrl.milestone.totalCards  | number:2) + '%', 'background-color': ($ctrl.statusColors[item.status] | color).color}">
            </div>
        </div>
        <md-card-title>
	        <md-card-title-text>
	                <div class="row">
	                    <span class="col-xs-3"  ng-class="{'strike': $ctrl.milestone.labelListValue.metadata.status === 'CLOSED'}" ng-bind="$ctrl.milestone.labelListValue.value"></span>
	                    <span class="col-xs-9 lvg-project-milestone__align-right">
	                        <span ng-repeat="item in $ctrl.cardsCountByStatus" class="lvg-project-milestone__status">
	                            <md-icon md-svg-icon="task" ng-style="$ctrl.statusColors[item.status]|color"></md-icon>
	                            <span>{{item.status | capitalize}}:</span>
	                            {{item.count}} ({{(item.count * 100 / milestone.totalCards) | number:0}}%)
	                        </span>
	                    </span>
	                </div>
	        </md-card-title-text>
        </md-card-title>
    </md-card>
    
    <md-card ng-if="$ctrl.detail.cards.found.length > 0">
        <md-card-content>
	        <table class="lvg-table">
	            <thead>
	                <tr>
	                    <th data-translate>project.milestone.card-id</th>
	                    <th data-translate>project.milestone.card-name</th>
	                    <th data-translate>project.milestone.column</th>
	                    <th data-translate>project.milestone.assigned-to</th>
	                </tr>
	            </thead>
	            <tbody>
	                <tr ng-repeat="card in $ctrl.detail.cards.found | orderBy:[orderCardByStatus,'boardShortName','sequence']">
	                    <td>
	                        <span ng-bind="::(card.boardShortName + '-' + card.sequence)"></span>
	                    </td>
	                    <td ng-bind="::card.name"></td>
	                    <td ng-init="$ctrl.loadColumn(card)" ng-bind="::card.column.columnName"></td>
	                    <td><span ng-repeat="assigned in card.labels | filter:{labelName: 'ASSIGNED', labelDomain: 'SYSTEM'} "><lvg-user-link user-id="assigned.labelValueUser"></lvg-user-link> </span></td>
	                </tr>
	            </tbody>
	        </table>
        </md-card-content>
    </md-card>
</div>