<md-card>
    <md-card-title>
        <md-card-title-text>
            <div class="md-headline"><span data-translate>card.people</span></div>
        </md-card-title-text>
    </md-card-title>
    <md-card-content>
        <div class="lvg-card-people__assigned">
            <md-list ng-if="$ctrl.assignedUsers">
                <md-list-item class="lvg-card-people__user" data-ng-repeat="user in $ctrl.assignedUsers">
                    <lvg-card-people-user user-id="user.value.valueUser"></lvg-card-people-user>
                </md-list-item>
            </md-list>
            <div ng-if="!$ctrl.assignedUsers"><span class="lvg-card-people__no-user" data-translate>card.assignedToNone</span></div>
        </div>
        <div class="lvg-card-people__watching">
            <div class="lvg-card-people__watching-title">
                <span data-translate>card.watchedBy</span>
            </div>
            <md-list ng-if="$ctrl.watchingUsers">
                <md-list-item class="lvg-card-people__user" data-ng-repeat="user in $ctrl.watchingUsers">
                    <lvg-card-people-user user-id="user.value.valueUser"></lvg-card-people-user>
                </md-list-item>
            </md-list>
            <div ng-if="!$ctrl.watchingUsers"><span class="lvg-card-people__no-user" data-translate>card.watchedByNone</span></div>
        </div>
    </md-card-content>
    <md-card-actions data-lvg-has-permission="UPDATE_CARD" class="lvg-card-people__actions">
        <form data-ng-submit="$ctrl.assignUser(user)">
            <div layout="row" layout-wrap>
                <div flex>
                    <md-autocomplete flex
                        md-no-cache="true"
                        md-selected-item="user"
                        md-search-text="userSearchText"
                        md-item-text="user.label"
                        md-items="user in $ctrl.searchUser(userSearchText)">
                        <md-item-template>{{user.label}}</md-item-template>
                    </md-autocomplete>
                </div>
                <div flex="nogrow">
                    <md-button md-no-ink class="md-primary" type="submit" ng-disabled="!user">
                        <span data-translate>button.assign</span>
                    </md-button>
                </div>
                <div flex="nogrow" ng-if="!$ctrl.isWatching()">
                    <md-button class="md-icon-button" ng-click="$ctrl.watchCard()">
                        <md-icon md-svg-icon="notifications"></md-icon>
                    </md-button>
                </div>
                <div flex="nogrow" ng-if="$ctrl.isWatching()">
                    <md-button class="md-icon-button" ng-click="$ctrl.unWatchCard()">
                        <md-icon md-svg-icon="notifications-off"></md-icon>
                    </md-button>
                </div>
            </div>
        </form>
    </md-card-actions>
</md-card>
